/*! PxTouch | http://github.com/thinkpixellab/pxtouch | 2013-09-12 */
"undefined"==typeof PxTouch&&(PxTouch={}),function(t){PxTouch.registerSpecialEvents=function(e,i,s){t.each(i,function(i,n){t.event.special[n]={setup:function(){var i=t(this),n=i.data(e);n||(n=new s(i),n.activeEventTypes=0,i.data(e,n)),n.activeEventTypes++,1===n.activeEventTypes&&n.start()},teardown:function(){var i=t(this).data(e);i&&(i.activeEventTypes--,0===i.activeEventTypes&&i.stop())}}})}}(PxTouch.jQuery||jQuery),function(t){function e(t){this.$el=t,this.activePointers=[],this.mouseEventsEnabled=!1;var e=function(t,e){return function(i){var s,n,r=h(i);for(s=0,n=r.length;n>s;s++)t.call(e,r[s],i)}};this.listeners={msPointer:{MSPointerDown:e(s,this),MSPointerMove:e(n,this),MSPointerUp:e(o,this),MSPointerCancel:e(r,this)},pointer:{pointerdown:e(s,this),pointermove:e(n,this),pointerup:e(o,this),pointercancel:e(r,this)},touch:{touchstart:e(i,this),touchmove:e(n,this),touchend:e(o,this),touchcancel:e(r,this)},mouse:{mousedown:e(s,this),mousemove:e(n,this),mouseup:e(o,this)}},this.docListeners={msPointer:{MSPointerUp:e(o,this)},pointer:{pointerup:e(o,this)},mouse:{mouseup:e(o,this)}},this.useTopDocument=!1;try{this.useTopDocument=document!==top.document}catch(a){}}function i(e,i){return this.mouseEventsEnabled&&(this.$el.off(this.listeners.mouse),t(document).off(this.docListeners.mouse),this.mouseEventsEnabled=!1),s.call(this,e,i)}function s(t,e){this.activePointers.push(t),this.triggerEvent("pxpointerstart",t,e)}function n(t,e){var i=t.indexIn(this.activePointers);i>=0&&(this.activePointers.splice(i,1,t),this.triggerEvent("pxpointermove",t,e))}function r(t,e){return o.call(this,t,e,!0)}function o(t,e,i){var s=t.indexIn(this.activePointers);s>=0&&(this.activePointers.splice(s,1),this.triggerEvent("pxpointerend",t,e,i))}function h(t){t.preventManipulation&&t.preventManipulation();var e,i,s,n,r,o,h=[],c=a(t),l=t.originalEvent,u=l.changedTouches||l.targetTouches||l.touches||[l];for(e=0,i=u.length;i>e;e++){if(s=u[e],n=r=0,s.pageX||s.pageY)n=s.pageX,r=s.pageY;else if(s.clientX||s.clientY){var g=document.documentElement;n=s.clientX+document.body.scrollLeft+g.scrollLeft,r=s.clientY+document.body.scrollTop+g.scrollTop}o=s.pointerId||s.identifier||e,h.push(new p(n,r,o,c))}return h}function a(t){if(0===t.type.indexOf("touch"))return c.TOUCH;if(0===t.type.indexOf("mouse"))return c.MOUSE;var e=t.originalEvent;switch(e.pointerType){case e.MSPOINTER_TYPE_MOUSE:case"mouse":return c.MOUSE;case e.MSPOINTER_TYPE_TOUCH:case"touch":return c.TOUCH;case e.MSPOINTER_TYPE_PEN:case"pen":return c.PEN}return c.MOUSE}function p(t,e,i,s){this.x=t,this.y=e,this.id=i,this.type=s}e.prototype.start=function(){var e;window.navigator.pointerEnabled?(this.$el.on(this.listeners.pointer),e=this.docListeners.pointer):window.navigator.msPointerEnabled?(this.$el.on(this.listeners.msPointer),e=this.docListeners.msPointer):("ontouchstart"in window&&this.$el.on(this.listeners.touch),this.$el.on(this.listeners.mouse),this.mouseEventsEnabled=!0,e=this.docListeners.mouse),t(document).on(e),this.useTopDocument&&t(top.document).on(e)},e.prototype.stop=function(){this.$el.off(this.listeners.msPointer).off(this.listeners.pointer).off(this.listeners.touch).off(this.listeners.mouse),t(document).off(this.docListeners.msPointer).off(this.docListeners.pointer).off(this.docListeners.mouse),this.useTopDocument&&t(top.document).off(this.docListeners.msPointer).off(this.docListeners.pointer).off(this.docListeners.mouse),this.mouseEventsEnabled=!1,this.activePointers=[]},e.prototype.triggerEvent=function(e,i,s,n){this.$el.trigger(new t.Event(e,{pointer:i,cancelled:n===!0,activePointers:this.activePointers,originalEvent:s}))};var c={MOUSE:"mouse",TOUCH:"touch",PEN:"pen"};p.prototype.getDistance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},p.prototype.indexIn=function(t){for(var e=0,i=t.length;i>e;e++)if(t[e].id===this.id)return e;return-1},PxTouch.registerSpecialEvents("pxpointers",["pxpointerstart","pxpointermove","pxpointerend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.paths=[];var s=t.proxy(i,this);this.listeners={pxpointerstart:s,pxpointermove:s,pxpointerend:s}}function i(e){var i,n,r,o,h,a=e.pointer,p=this.paths.length,c=0;for(o=0;p>o;o++)i=this.paths[o],i.isActive&&c++,i.id===a.id&&(h=o,n=i);e.cancelled?n&&(this.paths.splice(h,1),c-=n.isActive?1:0):(n?(n.movePointer=a,n.moveTime=(new Date).getTime()):(n=new s(a),this.paths.push(n),c++),"pxpointerend"===e.type&&n.isActive&&(c--,n.isActive=!1)),r=0>=c?"pxgestureend":0===p?"pxgesturestart":"pxgesturemove",this.$el.trigger(new t.Event(r,{paths:this.paths,cancelled:0===this.paths.length,originalEvent:e.originalEvent})),0>=c&&(this.paths=[])}function s(t){this.id=t.id,this.startPointer=t,this.startTime=(new Date).getTime(),this.movePointer=t,this.moveTime=this.startTime,this.isActive=!0}e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.paths=[]},s.prototype.getLength=function(){return Math.abs(this.movePointer.getDistance(this.startPointer))},s.prototype.getElapsed=function(){return this.moveTime-this.startTime},s.prototype.getAngle=function(){var t=Math.atan2(this.movePointer.y-this.startPointer.y,this.startPointer.x-this.movePointer.x);return 180*(t/Math.PI)+180},s.prototype.getDirection=function(){var t=this.getAngle();return t>=45&&135>t?"up":t>=135&&225>t?"left":t>=225&&315>t?"down":"right"},s.prototype.angleBetween=function(t){var e=Math.abs(this.getAngle()-t.getAngle());return e=Math.min(e,360-e)},PxTouch.registerSpecialEvents("pxgestures",["pxgesturestart","pxgesturemove","pxgestureend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.activeEventTypes=0,this.state=o.NONE,this.holdTimer=null;var s=t.proxy(i,this);this.listeners={pxgesturestart:s,pxgesturemove:s,pxgestureend:s}}function i(t){var e,i,h=t.paths,a=this.state,p="pxgestureend"===t.type,c=!1;t.originalEvent.which?c=3===t.originalEvent.which:t.originalEvent.button&&(c=2===t.originalEvent.button),a===o.INVALID||1!==h.length||c||t.cancelled?e=o.INVALID:(i=h[0].getLength(),e=i>n?o.INVALID:a===o.HOLD?o.HOLD:o.TAP),this.holdTimer||e!==o.TAP?this.holdTimer&&(e===o.INVALID||p)&&(clearTimeout(this.holdTimer),this.holdTimer=null):this.holdTimer=setTimeout(s(t,this),r),e===o.HOLD&&p||a===o.HOLD&&e!==a?this.triggerEvent("pxholdend",t,e===o.INVALID):p&&e===o.TAP&&this.triggerEvent("pxtap",t),this.state=p?o.NONE:e}function s(e,i){return t.proxy(function(){this.state=o.HOLD,this.triggerEvent("pxholdstart",e),this.holdTimer=null},i)}var n=10,r=500,o={NONE:0,INVALID:1,TAP:2,HOLD:3};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=o.NONE},e.prototype.triggerEvent=function(e,i,s){var n=i.paths.length>0?i.paths[0].movePointer:null;this.$el.trigger(new t.Event(e,{x:n?n.x:0,y:n?n.y:0,pointerType:n?n.type:null,cancelled:s===!0,originalEvent:i.originalEvent}))},PxTouch.registerSpecialEvents("pxtaps",["pxtap","pxholdstart","pxholdend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.activeEventTypes=0,this.state=r.NONE,this.firstX=0,this.firstY=0,this.firstTime=0,this.listeners={pxtap:t.proxy(i,this)}}function i(e){var i,o,h,a,p=this.state;if(p===r.NONE)i=r.SINGLE_TAP;else{var c=Date.now()-this.firstTime;c>n?i=r.SINGLE_TAP:(h=e.x-this.firstX,a=e.y-this.firstY,o=Math.abs(Math.sqrt(h*h+a*a)),o>s?i=r.SINGLE_TAP:(this.$el.trigger(new t.Event("pxdoubletap",{x:e.x,y:e.y,pointerType:e.pointerType,originalEvent:e.originalEvent})),i=r.NONE))}i===r.SINGLE_TAP&&(this.firstX=e.x,this.firstY=e.y,this.firstTime=Date.now()),this.state=i}var s=20,n=1e3,r={NONE:0,SINGLE_TAP:1};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=r.NONE},PxTouch.registerSpecialEvents("pxdoubletap",["pxdoubletap"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.state=o.NONE;var s=t.proxy(i,this);this.listeners={pxgesturestart:s,pxgesturemove:s,pxgestureend:s}}function i(e){var i,h,a,p,c,l,u=e.paths,g=this.state,v="pxgestureend"===e.type;if(g!==o.INVALID){if(u.length>2||e.cancelled)this.state=o.INVALID;else if(2===u.length&&(i=u[0],h=u[1],a=i.getLength(),p=h.getLength(),(a>s||p>s)&&(this.state=a>n&&p>n?i.angleBetween(h)>=r?o.PINCH:o.INVALID:o.PINCH),this.state===o.PINCH)){c=i.movePointer.getDistance(h.movePointer),l=i.startPointer.getDistance(h.startPointer);var f={originX:(i.movePointer.x+h.movePointer.x)/2,originY:(i.movePointer.y+h.movePointer.y)/2,scale:c/l,paths:u,cancelled:!1,originalEvent:e.originalEvent};g===o.NONE?this.$el.trigger(t.Event("pxpinchstart",f)):v||this.$el.trigger(t.Event("pxpinchmove",f)),v&&this.$el.trigger(t.Event("pxpinchend",f))}this.state===o.INVALID&&g===o.PINCH&&this.$el.trigger(t.Event("pxpinchend",{originX:0,originY:0,scale:0,paths:[],cancelled:!0,originalEvent:e.originalEvent}))}v&&(this.state=o.NONE)}var s=10,n=15,r=30,o={NONE:0,PINCH:1,INVALID:2};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=o.NONE},PxTouch.registerSpecialEvents("pxpinch",["pxpinchstart","pxpinchmove","pxpinchend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.state=o.NONE;var i=t.proxy(s,this);this.listeners={pxgesturestart:i,pxgesturemove:i,pxgestureend:i}}function i(t){var e,i,s,n,o,h=t.length;if(h>1)for(e=0;h>e;e++)if(s=t[e],s.isActive){for(n=!1,i=0;h>i;i++)if(e!==i&&(o=s.movePointer.getDistance(t[i].movePointer),r>=o)){n=!0;break}if(!n)return!1}return!0}function s(e){var s,r=e.paths,h=this.state,a="pxgestureend"===e.type;if(h!==o.INVALID){s=r.length>0?r[0].getLength():0;var p={paths:r,length:s,cancelled:e.cancelled,originalEvent:e.originalEvent};e.cancelled||!i(e.paths)?(this.state=o.INVALID,p.cancelled=!0):this.state===o.NONE?s>n&&(this.state=o.DRAG,this.$el.trigger(t.Event("pxdragstart",p))):a||this.$el.trigger(t.Event("pxdragmove",p)),(h===o.DRAG&&this.state===o.INVALID||this.state===o.DRAG&&a)&&this.$el.trigger(t.Event("pxdragend",p))}a&&(this.state=o.NONE)}var n=10,r=200,o={NONE:0,DRAG:1,INVALID:2};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=o.NONE},PxTouch.registerSpecialEvents("pxdrag",["pxdragstart","pxdragmove","pxdragend"],e)}(PxTouch.jQuery||jQuery),function(t){function e(e){this.$el=e,this.state=r.NONE,this.maxLength=0,this.angle=0;var s=t.proxy(i,this);this.listeners={pxdragstart:s,pxdragmove:s,pxdragend:s}}function i(e){var i,o,h=e.paths,a=this.state,p="pxdragend"===e.type,c=e.length;if(this.state!==r.INVALID){i=h.length>0?h[0].getAngle():0;var l={length:c,angle:i,paths:h,cancelled:e.cancelled,originalEvent:e.originalEvent};e.cancelled?this.state=r.INVALID:this.state===r.NONE?(this.state=r.SWIPE,this.maxLength=c,this.angle=i,this.$el.trigger(t.Event("pxswipestart",l))):(c>=this.maxLength?this.maxLength=c:this.maxLength-c>s&&(this.state=r.INVALID),o=Math.abs(this.angle-i),Math.min(o,360-o)>n&&(this.state=r.INVALID),this.state===r.INVALID||p||this.$el.trigger(t.Event("pxswipemove",l))),(a===r.SWIPE&&this.state===r.INVALID||this.state===r.SWIPE&&p)&&(l.cancelled=this.state===r.INVALID,this.$el.trigger(t.Event("pxswipeend",l)))}p&&(this.state=r.NONE,this.maxLength=0,this.angle=0)}var s=20,n=20,r={NONE:0,SWIPE:1,INVALID:2};e.prototype.start=function(){this.$el.on(this.listeners)},e.prototype.stop=function(){this.$el.off(this.listeners),this.state=r.NONE,this.maxLength=0,this.angle=0},PxTouch.registerSpecialEvents("pxswipe",["pxswipestart","pxswipemove","pxswipeend"],e)}(PxTouch.jQuery||jQuery);